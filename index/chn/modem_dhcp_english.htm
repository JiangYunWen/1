<html>

<head>
<meta http-equiv="Content-Type" content="text/html">

<title>System Command</title>
<script type="text/javascript" src="../util_gw.js"> </script>
<script type="text/javascript" src="../res/jquery.js"></script>
<script type="text/javascript" src="../res/sychip.js"></script>
<script type="text/javascript" src="../util_web_en.js"></script>

<style type="text/css">
.white_content {
 display: none;
 position: absolute;
 top: 15%;
 left: 10%;
 width: 20%;
 height: 20%;
 border: 10px solid #808080;
 z-index:1002;
}
.black_overlay {
 display: none;
 position: absolute;
 top: 0%;
 left: 0%;
 width: 100%;
 height: 100%;
 background-color:#f5f5f5;
 z-index:1001;
 -moz-opacity: 0.6;
 opacity:.80;
 filter: alpha(opacity=100);
}

</style>
<script>
var objTimeOut = "";
var WebModemGetInfoDdtcParamType =<%getInfo("ModemGetInfoDdtcParamType");%>; 
var WebModemGetInfoDhcpsetParamX;
var WebModemGetInfoDhdrsetParamIprange;
var WebModemGetInfoDsonswlsParamMode;


//屏蔽F5   
document.onkeydown = mykeydown;  

function mykeydown() {  
    if (event.keyCode == 116) //屏蔽F5刷新键      
    {  
        window.event.keyCode = 0;  
        return false;  
    }  
}   

function SetLabelText(Labelid,Text)
{
//obj_label= document.getElementById(Labid).innerHTML;
//obj_label.innerHTML=Text;
document.getElementById(Labelid).innerHTML=(Text);
}


function FormDhcpSwitch_Button_Submit()
{
	if("255"==document.all.FormDhcpSwitch.FormDhcpSwitch_Param_Switch.value)
	{
//		alert("Please select operation type");
		showdiv("Please select operation type",DivCloseMode_Alert);
		document.all.FormDhcpSwitch.FormDhcpSwitch_Param_Switch.focus();
		return false;
	}
	param = "";
    param +="FormDhcpsetSwitch_Param_Switch=";
	param += document.all.FormDhcpSwitch.FormDhcpSwitch_Param_Switch.value;
	showdiv("Changing，Please Wait...",DivCloseMode_None);
	WebPostProcess("/boafrm/formDhcpsetProcess",param,null);
}

function FormDhcpIprange_Button_Submit(mode)
{
	var param="";
	var Ipv4Pattern = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
	var ipv4start_txt = document.all.FormDhcpIprange.FormDhcpIprange_Param_Start.value;
	var ipv4end_txt = document.all.FormDhcpIprange.FormDhcpIprange_Param_End.value;
	var ipv4start_arr;
	var ipv4end_arr;

	ipv4start_arr = ipv4start_txt.split('.');
	ipv4end_arr = ipv4end_txt.split('.');
	
	if((false == Ipv4Pattern.test(ipv4start_txt))||(4!=ipv4start_arr.length))
	{
		showdiv("Incorrect IP address range",DivCloseMode_Alert);
		return;
	}
	if((false == Ipv4Pattern.test(ipv4end_txt))||(4!=ipv4end_arr.length))
	{
		showdiv("Incorrect IP address range",DivCloseMode_Alert);
		return;
	}
	
	for(var loopi=0;loopi<4;loopi++)
	{
		if(parseInt(ipv4start_arr[loopi])>parseInt(ipv4end_arr[loopi]))
		{
			showdiv("Incorrect IP address range",DivCloseMode_Alert);
			return;
		}
	}
	param = "";
	param +="FormDhdrset_Param_Iprange="+ipv4start_txt+":"+ipv4end_txt;	
//	alert(param);
//	return ;
	showdiv("Changing，Please Wait...",DivCloseMode_None);
	WebPostProcess("/boafrm/formDhdrsetProcess",param,null);
}
function GetRadioValueByName(RadioName)
{
	var item = null;
	var obj = document.getElementsByName(RadioName);
	for(var i=0;i<obj.length;i++)
	{
		if(obj[i].checked)
		{
			item =obj[i].value;
		}
	}
	return item;
}

function isInteger(obj) {
    return (parseInt(obj, 10) === obj)
}

function isNumber(name) //数值检测 
{ 
if(name.length == 0) 
return false; 
for(i = 0; i < name.length; i++) { 
if(name.charAt(i) < "0" || name.charAt(i) > "9") 
return false; 
} 
return true; 
} 



//关闭定时器
function closeIntervals()
{
	clearInterval(objTimeOut);
	objTimeOut=null;
}

function init()
{
	var TmpString="";

	
	/*调试开关at+cfun*/
	WebModemGetInfoDsonswlsParamMode =<%getInfo("ModemGetInfoDsonswlsParamMode");%>;
	if(0==WebModemGetInfoDsonswlsParamMode)
	{
		SetLabelText("LB_FormDhcpSwitch_Param_Switch","Close");
	}
	else if(1==WebModemGetInfoDsonswlsParamMode)
	{
		SetLabelText("LB_FormDhcpSwitch_Param_Switch","Open");	
	}
	else
	{
		alert("WebModemGetInfoDsonswlsParamMode Get parameter error! value = "+WebModemGetInfoDsonswlsParamMode );
	}

	/*主从设置*/
//	WebModemGetInfoDdtcParamType=<%getInfo("ModemGetInfoDdtcParamType");%>; 
	TmpString ="";
	if(0 == WebModemGetInfoDdtcParamType)
	{
		TmpString ="Auto";	
	}
	else if (1 == WebModemGetInfoDdtcParamType)
	{
		TmpString ="Central Node";
//		document.getElementById('FormDsnonunSn').style.display='none';		
	}
	else if (2 == WebModemGetInfoDdtcParamType)
	{
		TmpString ="Access Node";
		document.getElementById('FormDhcpIprange').style.display='none';		
//		document.getElementById('FormWhilteList').style.display='none';
//		document.getElementById('FormWhilteListOp').style.display='none';		
	}
	else
	{
		TmpString ="Not recongnizable WebModemGetInfoDdtcParamType = "+WebModemGetInfoDdtcParamType;
	}
	SetLabelText("LB_FormDdtc_Param_Type",TmpString);
	
	WebModemGetInfoDhcpsetParamX = <%getInfo("ModemGetInfoDhcpsetParamX");%>;
	if(0==WebModemGetInfoDhcpsetParamX)
	{
		SetLabelText("LB_FormDhcpSwitch_Param_Switch","Close");
	}
	else if(1==WebModemGetInfoDhcpsetParamX)
	{
		SetLabelText("LB_FormDhcpSwitch_Param_Switch","Dynamic DHCPServer(Central) or DHCPClient(Access)");
	}
	else if(2==WebModemGetInfoDhcpsetParamX)
	{
		SetLabelText("LB_FormDhcpSwitch_Param_Switch","Dynamic DHCPClient(Central/Access)");
	}	
	else
	{
		alert("WebModemGetInfoDhcpsetParamX Get parameter error! value = "+WebModemGetInfoDhcpsetParamX );
	}
	
	WebModemGetInfoDhdrsetParamIprange= <%getInfo("ModemGetInfoDhdrsetParamIprange");%>;
	SetLabelText("LB_FormDhcpIprange_Param_Iprange",WebModemGetInfoDhdrsetParamIprange);

}
</script>
</head>
<blockquote>
<h3><font color="#0000FF">DHCP Management(Work Type:[<label id="LB_FormDdtc_Param_Type">LB_FormDdtc_Param_Type</label>])</font></h3>
<h5><font color="red" >Note:Setting Finish，Restart Effective</font><h5>
<script language='javascript' src='../zh.js'></script>
<script type="text/javascript" src="../load.js"></script>
<body  onLoad="setCodeValue();init()">
 <table border="0" cellspacing="0" width="500">
 <tr><hr size=1 noshade align=top></tr>
</table>

<div id=idDivenglish style="display:block">
  <table border=0 width="500" cellspacing=0 cellpadding=0>

<form id="FormDhcpSwitch" name="FormDhcpSwitch" >
  <table>
  	<tr> 
      <td ><font size="2" weight="bold" ><b>DHCP Switch:</b></font></td>
    </tr>   
    <tr> 
	<td ><font size="2">DHCP Setting:[<label id="LB_FormDhcpSwitch_Param_Switch">LB_FormDhcpSwitch_Param_Switch</label>]</font></td>
    </tr>   
    <tr> 
      <td ><font size="2" weight="bold" >
	    <select name="FormDhcpSwitch_Param_Switch" id="FormDhcpSwitch_Param_Switch">
        <option value='0'>Close</option>
		<script>
    	   	document.write("<option value='1' >Dynamic DHCPServer(Central) or DHCPClient(Access)</option>");
    	   	document.write("<option value='2' >Dynamic DHCPClient(Central/Access)</option>");
		</script>          
          <option value='255' selected ="selected">Select</option>
        </select> </font>
        
		<input type="button" value="OK" id="FormDhcpSwitch_Button"  onClick="FormDhcpSwitch_Button_Submit();">  </td>
    </tr>
  </table>
</form>

<form id="FormDhcpIprange" name="FormDhcpIprange" >
  <table>
  	<tr> 
      <td><font size="2" weight="bold" ><b>Assigned Address Range(Format:XXX.XXX.XXX.XXX:XXX.XXX.XXX.XXX):</b></font></td>
    </tr>
  	<tr> 
      <td><font size="2" >Value:[<label id="LB_FormDhcpIprange_Param_Iprange">LB_FormDhcpIprange_Param_Iprange</label>]</font></td>
    </tr>     
  	<tr> 
      <td> <font size="2" weight="bold" >
      		<input type="text"   name="FormDhcpIprange_Param_Start" maxlength="15" size="15" id="FormDhcpIprange_Param_Start" ></font>:
			<input type="text"   name="FormDhcpIprange_Param_End" maxlength="15" size="15" id="FormDhcpIprange_Param_End" ></font>
			<input type="button" value="OK" id="FormDhcpIprange_Button"  onClick="FormDhcpIprange_Button_Submit();"> 
	</td>        
    </tr>
  </table>
</form>
</body>
</blockquote>
</html>


